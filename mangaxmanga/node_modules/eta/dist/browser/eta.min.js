!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Eta={})}(this,(function(e){"use strict";function t(e){var n,r,a=new Error(e);return n=a,r=t.prototype,Object.setPrototypeOf?Object.setPrototypeOf(n,r):n.__proto__=r,a}function n(e,n,r){var a=n.slice(0,r).split(/\n/),i=a.length,o=a[i-1].length+1;throw t(e+=" at line "+i+" col "+o+":\n\n  "+n.split(/\n/)[i-1]+"\n  "+Array(o).join(" ")+"^")}t.prototype=Object.create(Error.prototype,{name:{value:"Eta Error",enumerable:!1}});var r=new Function("return this;")().Promise;function a(e,t,n){for(var r in t)a=t,i=r,Object.prototype.hasOwnProperty.call(a,i)&&(e[r]=t[r]);var a,i;return e}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function o(e){return i[e]}var s=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,c=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,u=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g;function l(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function p(e,t){var r=[],a=!1,i=0,o=t.parse;function p(e,n){e&&(e=function(e,t,n,r){var a,i;return Array.isArray(t.autoTrim)?(a=t.autoTrim[1],i=t.autoTrim[0]):a=i=t.autoTrim,(n||!1===n)&&(a=n),(r||!1===r)&&(i=r),i||a?"slurp"===a&&"slurp"===i?e.trim():("_"===a||"slurp"===a?e=String.prototype.trimLeft?e.trimLeft():e.replace(/^[\s\uFEFF\xA0]+/,""):"-"!==a&&"nl"!==a||(e=e.replace(/^(?:\r\n|\n|\r)/,"")),"_"===i||"slurp"===i?e=String.prototype.trimRight?e.trimRight():e.replace(/[\s\uFEFF\xA0]+$/,""):"-"!==i&&"nl"!==i||(e=e.replace(/(?:\r\n|\n|\r)$/,"")),e):e}(e,t,a,n))&&(e=e.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),r.push(e))}t.rmWhitespace&&(e=e.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),s.lastIndex=0,c.lastIndex=0,u.lastIndex=0;for(var f,d=[o.exec,o.interpolate,o.raw].reduce((function(e,t){return e&&t?e+"|"+l(t):t?l(t):e}),""),g=new RegExp("([^]*?)"+l(t.tags[0])+"(-|_)?\\s*("+d+")?\\s*","g"),h=new RegExp("'|\"|`|\\/\\*|(\\s*(-|_)?"+l(t.tags[1])+")","g");f=g.exec(e);){i=f[0].length+f.index;var x,m=f[1],v=f[2],y=f[3]||"";p(m,v),h.lastIndex=i;for(var w=!1;x=h.exec(e);){if(x[1]){var I=e.slice(i,x.index);g.lastIndex=i=h.lastIndex,a=x[2];var E="";y===o.exec?E="e":y===o.raw?E="r":y===o.interpolate&&(E="i"),w={t:E,val:I};break}var b=x[0];if("/*"===b){var F=e.indexOf("*/",h.lastIndex);-1===F&&n("unclosed comment",e,x.index),h.lastIndex=F}else if("'"===b){c.lastIndex=x.index,c.exec(e)?h.lastIndex=c.lastIndex:n("unclosed string",e,x.index)}else if('"'===b){u.lastIndex=x.index,u.exec(e)?h.lastIndex=u.lastIndex:n("unclosed string",e,x.index)}else if("`"===b){s.lastIndex=x.index,s.exec(e)?h.lastIndex=s.lastIndex:n("unclosed string",e,x.index)}}w?r.push(w):n("unclosed tag",e,f.index+m.length)}if(p(e.slice(i,e.length),!1),t.plugins)for(var S=0;S<t.plugins.length;S++){var R=t.plugins[S];R.processAST&&(r=R.processAST(r,t))}return r}function f(e,t){var n=p(e,t),r="var tR='';"+(t.useWith?"with("+t.varName+"||{}){":"")+function(e,t){var n=0,r=e.length,a="";for(;n<r;n++){var i=e[n];if("string"==typeof i){a+="tR+='"+i+"';"}else{var o=i.t,s=i.val||"";"r"===o?a+="tR+="+s+";":"i"===o?(t.autoEscape&&(s="E.e("+s+")"),a+="tR+="+s+";"):"e"===o&&(a+=s+"\n")}}return a}(n,t)+"if(cb){cb(null,tR)} return tR"+(t.useWith?"}":"");if(t.plugins)for(var a=0;a<t.plugins.length;a++){var i=t.plugins[a];i.processFnString&&(r=i.processFnString(r,t))}return r}var d=new(function(){function e(e){this.cache=e}return e.prototype.define=function(e,t){this.cache[e]=t},e.prototype.get=function(e){return this.cache[e]},e.prototype.remove=function(e){delete this.cache[e]},e.prototype.reset=function(){this.cache={}},e.prototype.load=function(e){a(this.cache,e)},e}())({});function g(e,n){var r=this.templates.get(e);if(!r)throw t('Could not fetch template "'+e+'"');return r(n,this)}var h={varName:"it",autoTrim:[!1,"nl"],rmWhitespace:!1,autoEscape:!0,tags:["<%","%>"],parse:{interpolate:"=",raw:"~",exec:""},async:!1,templates:d,cache:!1,plugins:[],useWith:!1,e:function(e){var t=String(e);return/[&<>"']/.test(t)?t.replace(/[&<>"']/g,o):t},include:g};function x(e,t){var n={};return a(n,h),t&&a(n,t),e&&a(n,e),n}function m(e,n){var r,a=x(n||{});if(a.async)try{r=new Function("return (async function(){}).constructor;")()}catch(e){throw e instanceof SyntaxError?t("This environment doesn't support async/await"):e}else r=Function;try{return new r(a.varName,"E","cb",f(e,a))}catch(n){throw n instanceof SyntaxError?t("Bad template syntax\n\n"+n.message+"\n"+Array(n.message.length+1).join("=")+"\n"+f(e,a)):n}}function v(e,t){var n;return t.cache&&t.name&&t.templates.get(t.name)?t.templates.get(t.name):(n="function"==typeof e?e:m(e,t),t.cache&&t.name&&t.templates.define(t.name,n),n)}g.bind(h),e.compile=m,e.compileToString=f,e.defaultConfig=h,e.getConfig=x,e.parse=p,e.render=function(e,n,a,i){var o=x(a||{});if(!o.async)return v(e,o)(n,o);if(!i){if("function"==typeof r)return new r((function(t,r){try{t(v(e,o)(n,o))}catch(e){r(e)}}));throw t("Please provide a callback function, this env doesn't support Promises")}try{v(e,o)(n,o,i)}catch(e){return i(e)}},e.templates=d,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=eta.min.js.map
